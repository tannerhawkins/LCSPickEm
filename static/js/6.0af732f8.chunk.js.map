{"version":3,"sources":["images/lcs-logo.png","components/Authentication/SignInOutButton.js","components/Authentication/Header.js","pages/LogIn/SignIn.js"],"names":["StyledSignInButton","styled","StyledButton","SignInOutButton","className","history","useHistory","dispatch","useDispatch","loginState","useSelector","selectIsSignedIn","onClick","push","auth","signOut","then","clearState","StyledHeader","header","Constants","COLOR","BLACK","HEADER_HEIGHT","HeaderName","div","StyledLogo","img","StyledLogoContainer","Navigation","id","src","Logo","MainContainer","StyledButtonContainer","StyledTitle","StyledForm","form","StyledInput","input","StyledEmailInput","StyledSignUpButton","p","StyledSubmitButton","Button","StyledError","SignIn","errorMessage","setErrorMessage","useState","title","description","type","placeholder","name","required","data","Object","values","document","forms","signInForm","reduce","obj","field","value","email","includes","signInWithEmailAndPassword","password","userDataDb","doc","currentUser","uid","get","signIn","setPasswordLength","length","gameDataDb","result","passedWeeks","docs","map","games","start","weekEnd","Date","nextWeek","setWeek","catch","error","code","message"],"mappings":"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","file":"static/js/6.0af732f8.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/lcs-logo.dbbe227a.png\";","import React from \"react\";\r\nimport { auth } from \"../../data/firebase.js\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport StyledButton from \"../Template/Button.js\";\r\nimport { Constants } from \"../../data/constants.js\";\r\nimport styled from \"styled-components\";\r\nimport { selectIsSignedIn } from \"../../app/account/selectors.js\";\r\nimport { clearState } from \"../../app/store.js\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst SignInOutButton = ({ className }) => {\r\n  const history = useHistory();\r\n  const dispatch = useDispatch();\r\n  const loginState = useSelector(selectIsSignedIn);\r\n\r\n  const logout = () => {\r\n    auth.signOut().then(() => {\r\n      dispatch(clearState());\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className={className} data-test=\"login-logout\">\r\n      {!loginState && (\r\n        <StyledSignInButton onClick={() => history.push(\"/signin\")}>\r\n          SIGN-IN\r\n        </StyledSignInButton>\r\n      )}\r\n      {loginState && (\r\n        <StyledSignInButton onClick={logout}>LOGOUT</StyledSignInButton>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst StyledSignInButton = styled(StyledButton)`\r\n  width: 120px;\r\n  height: 40px;\r\n  margin-left: 10px;\r\n  color: black;\r\n  @media (max-width: 800px) {\r\n    width: 60px;\r\n    height: 30px;\r\n    font-size: 10px;\r\n  }\r\n`;\r\n\r\nexport default SignInOutButton;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Constants } from \"../../data/constants\";\r\nimport Logo from \"../../images/lcs-logo.png\";\r\nimport SignInOutButton from \"../Authentication/SignInOutButton\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst Navigation = () => {\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <StyledHeader id=\"header\">\r\n      <StyledLogoContainer onClick={() => history.push(`/home`)}>\r\n        <StyledLogo src={Logo} />\r\n        <HeaderName>LCS Pick'Em</HeaderName>\r\n      </StyledLogoContainer>\r\n    </StyledHeader>\r\n  );\r\n};\r\n\r\nconst StyledHeader = styled.header`\r\n  display: flex;\r\n  background-color: ${Constants.COLOR.BLACK};\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  height: ${Constants.HEADER_HEIGHT};\r\n  left: 0;\r\n  position: fixed;\r\n  top: 0;\r\n  width: 100%;\r\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n  z-index: 100000;\r\n`;\r\n\r\nconst StyledButtonContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 3%;\r\n`;\r\n\r\nconst HeaderName = styled.div`\r\n  color: white;\r\n  white-space: nowrap;\r\n  margin-left: 30px;\r\n  font-size: 30px;\r\n  font-weight: bold;\r\n  text-shadow: 0px 2px 2px rgba(0, 0, 0, 0.25);\r\n  @media (max-width: 800px) {\r\n    display: none;\r\n  }\r\n`;\r\n\r\nconst StyledLogo = styled.img`\r\n  margin-left: 3%;\r\n  width: 100px;\r\n  height: 70px;\r\n`;\r\n\r\nconst StyledLogoContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-left: 3%;\r\n  :hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst StyledSignInOutButton = styled(SignInOutButton)``;\r\n\r\nexport default Navigation;\r\n","import React, { useState } from \"react\";\r\nimport Main from \"../../layouts/Main\";\r\nimport styled from \"styled-components\";\r\nimport Header from \"../../components/Authentication/Header\";\r\nimport { Constants } from \"../../data/constants\";\r\nimport Button from \"../../components/Template/Button\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { auth, gameDataDb, userDataDb } from \"../../data/firebase\";\r\nimport {\r\n  setPasswordLength,\r\n  setWeek,\r\n  signIn,\r\n} from \"../../app/account/actions.js\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst SignIn = () => {\r\n  const history = useHistory();\r\n  const [errorMessage, setErrorMessage] = useState();\r\n  const dispatch = useDispatch();\r\n\r\n  const handleSubmit = () => {\r\n    setErrorMessage();\r\n\r\n    // get sign up form data\r\n    const data = Object.values(document.forms.signInForm).reduce(\r\n      (obj, field) => {\r\n        obj[field.name] = field.value;\r\n        return obj;\r\n      },\r\n      {}\r\n    );\r\n\r\n    // checks all fields are filled out\r\n    for (var value in data) {\r\n      if (data[value] === \"\") {\r\n        setErrorMessage(\"Please fill out all fields\");\r\n        return;\r\n      }\r\n    }\r\n    if (!data.email.includes(\"@\")) {\r\n      setErrorMessage(\"Please enter valid email address\");\r\n      return;\r\n    }\r\n\r\n    auth\r\n      .signInWithEmailAndPassword(data.email, data.password)\r\n      .then(() => {\r\n        userDataDb\r\n          .doc(auth.currentUser.uid)\r\n          .get()\r\n          .then((doc) => {\r\n            dispatch(signIn(doc.data()));\r\n            dispatch(setPasswordLength(data.password.length));\r\n            gameDataDb\r\n              .get()\r\n              .then((result) => {\r\n                const weekEnds = result.docs.map(doc => doc.data().games[doc.data().games.length - 1]?.start);\r\n                const passedWeeks = weekEnds.reduce(weekEnd => {\r\n                  const now = new Date();\r\n                  if (now > weekEnd) {\r\n                    return 1;\r\n                  } else {\r\n                    return 0;\r\n                  }\r\n                })\r\n                const nextWeek = passedWeeks == result.docs.length ? passedWeeks : passedWeeks + 1;\r\n                dispatch(setWeek(result.docs[nextWeek]?.data() ? result.docs[nextWeek]?.data() : result.docs[0]?.data()));\r\n              })\r\n              .then(history.push(`/home`));\r\n          });\r\n      })\r\n      .catch((error) => {\r\n        if (error.code === \"auth/user-not-found\") {\r\n          setErrorMessage(\"A user with this email address does not exist\");\r\n        } else if (error.code === \"auth/wrong-password\") {\r\n          setErrorMessage(\"The password is invalid.\");\r\n        } else {\r\n          setErrorMessage(error.message);\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <Main title={\"Sign-In\"} description={\"Sign-In\"}>\r\n      <Header />\r\n      <MainContainer>\r\n        <StyledTitle>Sign-In</StyledTitle>\r\n        <StyledForm id=\"signInForm\">\r\n          <StyledEmailInput\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            name=\"email\"\r\n            data-test=\"email\"\r\n            required\r\n          />\r\n          <StyledInput\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            name=\"password\"\r\n            data-test=\"password\"\r\n            required\r\n          />\r\n          <StyledError>{errorMessage}</StyledError>\r\n          <StyledButtonContainer>\r\n            <StyledSignUpButton\r\n              data-test=\"sign-up\"\r\n              onClick={() => history.push(`/signup`)}\r\n            >\r\n              Don't have an account? Sign up here\r\n            </StyledSignUpButton>\r\n            <StyledSubmitButton\r\n              type=\"submit\"\r\n              data-test=\"submit\"\r\n              onClick={handleSubmit}\r\n            >\r\n              SIGN-IN\r\n            </StyledSubmitButton>\r\n          </StyledButtonContainer>\r\n        </StyledForm>\r\n      </MainContainer>\r\n    </Main>\r\n  );\r\n};\r\n\r\nconst MainContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding-top: calc(${Constants.HEADER_HEIGHT} + 40px);\r\n  height: calc(100vh - ${Constants.HEADER_HEIGHT}) vh;\r\n`;\r\n\r\nconst StyledButtonContainer = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-top: 5%;\r\n`;\r\n\r\nconst StyledTitle = styled.header`\r\n  font-weight: bold;\r\n  font-size: 64px;\r\n  margin-bottom: 3%;\r\n  @media (max-width: 1024px) {\r\n    margin-top: 17%;\r\n    margin-bottom: 15%;\r\n  }\r\n`;\r\n\r\nconst StyledForm = styled.form`\r\n  display: flex;\r\n  flex-direction: column;\r\n  outline: none;\r\n  width: 90%;\r\n  max-width: 600px;\r\n`;\r\n\r\nconst StyledInput = styled.input`\r\n  border: none;\r\n  border-bottom: 1px solid black;\r\n  height: 60px;\r\n  font-size: 30px;\r\n  outline: none;\r\n  @media (max-width: 1024px) {\r\n    height: 50px;\r\n  }\r\n`;\r\n\r\nconst StyledEmailInput = styled(StyledInput)`\r\n  margin-bottom: 60px;\r\n`;\r\n\r\nconst StyledSignUpButton = styled.p`\r\n  text-align: right;\r\n  font-size: 18px;\r\n  width: 55%;\r\n  color: red;\r\n\r\n  &:hover {\r\n    cursor: pointer;\r\n    color: #ff8585;\r\n  }\r\n`;\r\n\r\nconst StyledSubmitButton = styled(Button)`\r\n  font-size: 25px;\r\n  height: 70px;\r\n  width: 20%;\r\n  min-width: 100px;\r\n  color: white;\r\n  background-color: ${Constants.COLOR.BLACK};\r\n  &:hover {\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst StyledError = styled.p`\r\n  color: red;\r\n  margin-top: -20px;\r\n`;\r\n\r\nexport default SignIn;\r\n"],"sourceRoot":""}